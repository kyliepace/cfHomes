(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{221:function(e,t,n){var content=n(238);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(50).default)("842b8a40",content,!1,{sourceMap:!1})},222:function(e,t,n){var content=n(240);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(50).default)("16aafc03",content,!1,{sourceMap:!1})},223:function(e,t,n){var content=n(258);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(50).default)("1b7833da",content,!1,{sourceMap:!1})},233:function(e){e.exports=JSON.parse('{"api":{"urls":{"crossfit":"getCrossfits","houses":"getZoopla","cloud_endpoint":{"production":"https://europe-west1-crossfit-homes.cloudfunctions.net","development":"http://localhost:8010"}}}}')},234:function(e,t,n){"use strict";n.r(t);n(28);var r,o,c=n(1),l="undefined"!=typeof window,d={};l&&(n(148),n(236),o=n(149),r=n(0),d=n(197)),d=n(197),c.a.component("v-map",d.LMap),c.a.component("v-tilelayer",d.LTileLayer),c.a.component("v-geojson-layer",d.LGeoJson),c.a.component("v-marker",d.LMarker),c.a.component("v-popup",d.LPopup);var f={name:"myMap",data:function(){return{tsUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:8,center:[53.1,-2.4],inertia:!0,minZoom:3,maxZoom:18,cfOptions:{style:function(){return{weight:2,fillColor:"black",color:"black"}},pointToLayer:function(e,t){return l?r.circle(t,10,{radius:41,fillColor:"black"}):void 0},onEachFeature:function(e,t){t.bindPopup('<a href="'+e.properties.website+'" target="_blank">'+e.properties.name+"</a>")}},reOptions:{pointToLayer:function(e,t){return l?r.marker(t,{icon:r.icon({iconUrl:o,iconSize:[20,40]})}):void 0},onEachFeature:function(e,t){e.properties.layer=t,t.bindPopup('<img src="'+e.properties.image_url+'"/><br/><a href="'+e.properties.url+'" target="_blank">'+e.properties.street_name+"</a><br/>&#163;"+e.properties.price)}}}},props:["cfGeoJson","reGeoJson","handleMove"],methods:{centerUpdated:function(e){this.handleMove(e)}}},v=(n(237),n(32)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mapDiv"}},[n("client-only",[n("v-map",{attrs:{minZoom:e.minZoom,maxZoom:e.maxZoom,inertia:"inertia",zoom:e.zoom,center:e.center},on:{"update:center":e.centerUpdated}},[n("v-tilelayer",{attrs:{url:e.tsUrl}}),e._v(" "),""!==e.cfGeoJson?n("v-geojson-layer",{attrs:{geojson:e.cfGeoJson,options:e.cfOptions}}):e._e(),e._v(" "),""!==e.reGeoJson?n("v-geojson-layer",{attrs:{geojson:e.reGeoJson,options:e.reOptions}}):e._e()],1)],1)],1)}),[],!1,null,"0b64acc2",null);t.default=component.exports},237:function(e,t,n){"use strict";var r=n(221);n.n(r).a},238:function(e,t,n){(t=n(49)(!1)).push([e.i,"#mapDiv[data-v-0b64acc2]{height:80vh;width:90%;margin:auto;border:1px solid #000}",""]),e.exports=t},239:function(e,t,n){"use strict";var r=n(222);n.n(r).a},240:function(e,t,n){(t=n(49)(!1)).push([e.i,"input[data-v-3d528819]{padding:5px}",""]),e.exports=t},257:function(e,t,n){"use strict";var r=n(223);n.n(r).a},258:function(e,t,n){(t=n(49)(!1)).push([e.i,'#main{font-family:"Avenir",Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}#loading{position:absolute;top:150px;right:51%;left:49%}#searchForm{margin:70px auto 40px}',""]),e.exports=t},259:function(e,t,n){"use strict";n.r(t);n(103),n(27);var r=n(7),o=n(235),c=n.n(o),l=n(234),d={name:"AddressSearch",data:function(){return{categoryId:[]}},props:["handleClick","obj"],methods:{onClick:function(){console.log(this.minPrice),this.handleClick({categoryId:this.categoryId})}}},f=(n(239),n(32)),v=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.minPrice,expression:"minPrice"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.minPrice=t.target.multiple?n:n[0]}}},[n("option",[e._v("Min Price")]),e._v(" "),n("option",{attrs:{value:"0"}},[e._v("0")]),e._v(" "),n("option",{attrs:{selected:"",value:"50000"}},[e._v("50,000")]),e._v(" "),n("option",{attrs:{value:"100000"}},[e._v("100,000")])]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.maxPrice,expression:"maxPrice"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.maxPrice=t.target.multiple?n:n[0]}}},[n("option",[e._v("Max Price")]),e._v(" "),n("option",{attrs:{value:"100000"}},[e._v("100,000")]),e._v(" "),n("option",{attrs:{selected:"",value:"250000"}},[e._v("250,000")]),e._v(" "),n("option",{attrs:{value:"1000000"}},[e._v("1,000,000")])]),e._v(" "),n("button",{on:{click:e.onClick,enter:e.onClick}},[e._v("Update Prices")])])}),[],!1,null,"3d528819",null).exports,m=n(224),h=n.n(m),_=n(233);function x(){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(_.api.urls.cloud_endpoint.production,"/").concat(_.api.urls.crossfit),n={method:"POST",url:t},e.next=4,h.a.request(n);case 4:return r=e.sent,console.log("".concat(r.data.features.length," crossfits received: ")),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(233);function k(){return J.apply(this,arguments)}function J(){return(J=Object(r.a)(regeneratorRuntime.mark((function e(){var data,t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data=o.length>0&&void 0!==o[0]?o[0]:{},t="".concat(w.api.urls.cloud_endpoint.production,"/").concat(w.api.urls.houses),n={method:"POST",url:t,headers:{"Content-Type":"application/json"},data:data},e.next=5,h.a.request(n);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L={name:"app",components:{MyMap:l.default,AddressSearch:v,CubeSpin:c.a},data:function(){return{errors:[],instructions:"Find houses for sale near a crossfit",crossFitGeoJson:"",locationGeoJson:"",showLoader:!1,propertyLength:""}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCrossfits();case 2:case"end":return t.stop()}}),t)})))()},methods:{findVenuesByCenter:function(e){var t="".concat(e.lat,",").concat(e.lng);return this.findVenues({center:t})},getCrossfits:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x();case 3:e.crossFitGeoJson=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message),e.errors.push(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},findVenues:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return t.showLoader=!0,n.prev=3,n.next=6,k(e);case 6:t.locationGeoJson=n.sent,t.propertyLength=t.locationGeoJson.length,t.showLoader=!1,n.next=16;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(n.t0.message),t.errors.push(n.t0),t.showLoader=!1;case 16:case"end":return n.stop()}}),n,null,[[3,11]])})))()}}},M=(n(257),Object(f.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("h3",[e._v("Crossfit Homes")]),e._v(" "),e.showLoader?n("p",{attrs:{id:"loading"}}):e._e(),e._v(" "),e.propertyLength>0?n("p",[e._v(e._s(e.propertyLength)+" results")]):n("p",[e._v(e._s(e.instructions))]),e._v(" "),n("MyMap",{attrs:{cfGeoJson:e.crossFitGeoJson,reGeoJson:e.locationGeoJson,handleMove:e.findVenuesByCenter}})],1)}),[],!1,null,null,null));t.default=M.exports;installComponents(M,{MyMap:n(234).default})}}]);