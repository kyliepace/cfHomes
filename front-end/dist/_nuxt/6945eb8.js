(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{221:function(e,t,r){var content=r(239);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(50).default)("5d188db4",content,!0,{sourceMap:!1})},222:function(e,t,r){var content=r(241);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(50).default)("93d7950e",content,!0,{sourceMap:!1})},223:function(e,t,r){var content=r(259);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(50).default)("1b7833da",content,!0,{sourceMap:!1})},233:function(e){e.exports=JSON.parse('{"api":{"urls":{"crossfit":"getCrossfits","houses":"getZoopla","cloud_endpoint":"https://europe-west1-crossfit-homes.cloudfunctions.net/"}}}')},234:function(e,t,r){"use strict";r.r(t);r(28);var n,o,c=r(1),l="undefined"!=typeof window,m={};l&&(r(148),r(237),o=r(149),n=r(0),m=r(197)),m=r(197),c.a.component("v-map",m.LMap),c.a.component("v-tilelayer",m.LTileLayer),c.a.component("v-geojson-layer",m.LGeoJSON),c.a.component("v-marker",m.LMarker),c.a.component("v-popup",m.LPopup);var f={name:"myMap",components:{},data:function(){return{tsUrl:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:8,center:[53.1,-2.4],inertia:!0,minZoom:3,maxZoom:18,cfOptions:{style:function(){return{weight:2,fillColor:"black",color:"black"}},pointToLayer:function(e,t){return l?n.circle(t,10,{radius:41,fillColor:"black"}):void 0},onEachFeature:function(e,t){e.properties.layer=t,t.bindPopup('<a href="'+e.properties.website+'" target="_blank">'+e.properties.name+"</a>")}},reOptions:{pointToLayer:function(e,t){return l?n.marker(t,{icon:n.icon({iconUrl:o,iconSize:[20,40]})}):void 0},onEachFeature:function(e,t){e.properties.layer=t,t.bindPopup('<img src="'+e.properties.image_url+'"/><br/><a href="'+e.properties.url+'" target="_blank">'+e.properties.street_name+"</a><br/>&#163;"+e.properties.price)}}}},props:["cfGeoJson","reGeoJson"],mounted:function(){console.log("mounted map")},events:{},methods:{}},d=(r(238),r(32)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"mapDiv"}},[r("client-only",[r("v-map",{attrs:{minZoom:e.minZoom,maxZoom:e.maxZoom,inertia:"inertia",zoom:e.zoom,center:e.center}},[r("v-tilelayer",{attrs:{url:e.tsUrl}}),e._v(" "),r("v-geojson-layer",{attrs:{geojson:e.cfGeoJson,options:e.cfOptions}}),e._v(" "),r("v-geojson-layer",{attrs:{geojson:e.reGeoJson,options:e.reOptions}})],1)],1)],1)}),[],!1,null,"27fe0537",null);t.default=component.exports},235:function(e,t,r){"use strict";r.r(t);var n={name:"AddressSearch",data:function(){return{minPrice:this.obj.minPrice,maxPrice:this.obj.maxPrice,bounds:this.obj.bounds}},props:["handleClick","obj"],methods:{onClick:function(){console.log(this.minPrice),this.handleClick({minPrice:this.minPrice,maxPrice:this.maxPrice,bounds:this.bounds})}}},o=(r(240),r(32)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.minPrice,expression:"minPrice"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.minPrice=t.target.multiple?r:r[0]}}},[r("option",[e._v("Min Price")]),e._v(" "),r("option",{attrs:{value:"0"}},[e._v("0")]),e._v(" "),r("option",{attrs:{selected:"",value:"50000"}},[e._v("50,000")]),e._v(" "),r("option",{attrs:{value:"100000"}},[e._v("100,000")])]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.maxPrice,expression:"maxPrice"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.maxPrice=t.target.multiple?r:r[0]}}},[r("option",[e._v("Max Price")]),e._v(" "),r("option",{attrs:{value:"100000"}},[e._v("100,000")]),e._v(" "),r("option",{attrs:{selected:"",value:"250000"}},[e._v("250,000")]),e._v(" "),r("option",{attrs:{value:"1000000"}},[e._v("1,000,000")])]),e._v(" "),r("button",{on:{click:e.onClick,enter:e.onClick}},[e._v("Update Prices")])])}),[],!1,null,"4df87247",null);t.default=component.exports},238:function(e,t,r){"use strict";var n=r(221);r.n(n).a},239:function(e,t,r){(t=r(49)(!1)).push([e.i,"#mapDiv[data-v-27fe0537]{height:80vh;width:90%;margin:auto;border:1px solid #000}",""]),e.exports=t},240:function(e,t,r){"use strict";var n=r(222);r.n(n).a},241:function(e,t,r){(t=r(49)(!1)).push([e.i,"input[data-v-4df87247]{padding:5px}",""]),e.exports=t},258:function(e,t,r){"use strict";var n=r(223);r.n(n).a},259:function(e,t,r){(t=r(49)(!1)).push([e.i,'#main{font-family:"Avenir",Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}#loading{position:absolute;top:150px;right:51%;left:49%}#searchForm{margin:70px auto 40px}',""]),e.exports=t},260:function(e,t,r){"use strict";r.r(t);r(27);var n=r(7),o=r(236),c=r.n(o),l=r(234),m=r(235),f=r(224),d=r.n(f),v=r(233);function h(){return x.apply(this,arguments)}function x(){return(x=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",baseURL:v.api.urls.cloud_endpoint,url:v.api.urls.crossfit,data:obj},e.next=3,d.a.request(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=r(233);function y(e){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",baseURL:_.api.urls.cloud_endpoint,url:_.api.urls.houses,data:t},e.next=3,d.a.request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P={name:"app",components:{MyMap:l.default,AddressSearch:m.default,CubeSpin:c.a},data:function(){return{errors:[],instructions:"Find houses for sale near a crossfit",crossFitGeoJson:"",realEstateGeoJson:"",showLoader:!1,propertyLength:"",searchObject:{minPrice:5e4,maxPrice:25e4,bounds:[49.97,58.5,-8.05,1.72]}}},beforeMount:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getCrossfits();case 2:return t.next=4,e.findRealEstate({minPrice:e.searchObject.minPrice,maxPrice:e.searchObject.maxPrice,bounds:e.searchObject.bounds});case 4:case"end":return t.stop()}}),t)})))()},methods:{getCrossfits:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:e.crossFitGeoJson=t.sent,t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message),e.errors.push(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},findRealEstate:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return t.showLoader=!0,r.prev=3,r.next=6,y(e);case 6:t.realEstateGeoJson=r.sent,t.propertyLength=t.realEstateGeoJson.length,t.showLoader=!1,r.next=16;break;case 11:r.prev=11,r.t0=r.catch(3),console.log(r.t0.message),t.errors.push(r.t0),t.showLoader=!1;case 16:case"end":return r.stop()}}),r,null,[[3,11]])})))()}}},k=(r(258),r(32)),component=Object(k.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[r("h3",[e._v("Crossfit Homes")]),e._v(" "),e.showLoader?r("p",{attrs:{id:"loading"}}):e._e(),e._v(" "),e.propertyLength>0?r("p",[e._v(e._s(e.propertyLength)+" results")]):r("p",[e._v(e._s(e.instructions))]),e._v(" "),r("AddressSearch",{attrs:{id:"searchForm",handleClick:e.findRealEstate,obj:e.searchObject},on:{submit:e.findRealEstate}}),e._v(" "),r("MyMap",{attrs:{cfGeoJson:e.crossFitGeoJson,reGeoJson:e.realEstateGeoJson}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{AddressSearch:r(235).default,MyMap:r(234).default})}}]);